{{#> layout}}
  <style>
    main { max-width: 1000px; margin: auto; }
    h1 { display: inline; margin-right: 0.5em; }
    header { display: flex; align-items: center; }
    .nav { font-size: 14pt; }
    .nav a { margin: 0 0.1em; }
    .types { margin: 0.2em 0; }
  </style>
  <main>
    <header>
      <h1><a href="/">wwxr.io</a></h1>
      <span class="nav">
        <a href="/explore">explore</a>
        <a href="/blog">blog</a>
      </span>
    </header>
    <form>
      <input tabindex="1" name="q" value="{{q}}" />
      <button>search</button>
      <div class="types">
      <label><input type="radio" name="t" value="all" {{#if types.all}}checked{{/if}} />all</label>
      <label><input type="radio" name="t" value="aframe" {{#if types.aframe}}checked{{/if}} />a-frame</label>
      <label><input type="radio" name="t" value="gltf" {{#if types.gltf}}checked{{/if}} />gltf</label>
      <label><input type="radio" name="t" value="usdz" {{#if types.usdz}}checked{{/if}} />usdz</label>
      </div>
    </form>
    <div>{{totalCount}} results</div>
    {{#each results}}
      <div class="result">
        <div class="header">
        {{#if hasScene}}
        <span class="tag">a</span>
        {{/if}}

        {{#if ../isAndroid}}
        {{#each models}}
        <a class="tag" href="intent://arvr.google.com/scene-viewer/1.0?file={{this}}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url={{this}};end;">m</a>
        {{/each}}
        {{/if}}

        {{#if ../isIDevice}}
        {{#each iosModels}}
        <a class="tag" rel="ar" href="{{this}}">m</a>
        {{/each}}
        {{/if}}

        {{#each models}}
        <a class="tag" href="{{this}}">gltf</a>
        {{/each}}

        {{#if ../isAppleDevice}}
        {{#each iosModels}}
        <a class="tag" href="{{this}}">usdz</a>
        {{/each}}
        {{/if}}

        <a class="title" href="{{url}}" title="{{prettyTitle}}">{{prettyTitle}}</a>
        </div>

        <span class="url">{{prettyUrl}}</span>

        <div class="desc">
          {{description}}
          <div class="fade"></div>
        </div>
      </div>
    {{/each}}

    <div class="paging">
      <a {{#unless isFirstPage}}href="?q={{q}}&p={{prevPage}}"{{/unless}}>prev</a>
      <a {{#unless isLastPage}}href="?q={{q}}&p={{nextPage}}"{{/unless}}>next</a>
    </div>
  </main>
{{/layout}}
